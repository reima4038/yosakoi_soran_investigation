# Requirements Document

## Introduction

テンプレート管理機能において、UATで発見された複数の不具合を修正し、完全に機能するテンプレート管理システムを実現する。現在、テンプレート編集画面への遷移、データの永続化、公開・非公開切り替え機能に問題があり、これらを解決してユーザーが期待通りにテンプレート管理を行えるようにする。

## Requirements

### Requirement 1

**User Story:** 評価者または管理者として、既存のテンプレートを編集したい。新しいテンプレートを作成することなく、テンプレートの内容と設定を更新できるようにするため。

#### Acceptance Criteria

1. テンプレート一覧でテンプレートの「編集」ボタンをクリックしたとき、システムはテンプレート編集ページに遷移すること
2. `/templates/{id}/edit`にアクセスしたとき、システムは現在のテンプレートデータが事前入力されたテンプレート編集フォームを表示すること
3. テンプレートフィールドを変更して保存したとき、システムは変更をバックエンドに永続化すること
4. テンプレートの変更を保存したとき、システムは更新された情報でテンプレート詳細ページにリダイレクトすること
5. 編集をキャンセルしたとき、システムは変更を破棄してテンプレート詳細ページに戻ること

### Requirement 2

**User Story:** 評価者または管理者として、テンプレートデータがバックエンドAPIから取得され、保存されることを望む。テンプレートの変更が永続的で、モックデータではないようにするため。

#### Acceptance Criteria

1. テンプレート詳細を表示するとき、システムはモックデータではなくバックエンドAPIから実際のデータを取得すること
2. 新しいテンプレートを作成するとき、システムはそれをバックエンドに保存し、サーバー生成IDを持つ作成されたテンプレートを返すこと
3. テンプレートを更新するとき、システムは変更をバックエンドAPIに送信し、レスポンスでローカル状態を更新すること
4. テンプレートを削除するとき、システムはそれをバックエンドから削除し、それに応じてUIを更新すること
5. API呼び出しが失敗したとき、システムはユーザーに適切なエラーメッセージを表示すること

### Requirement 3

**User Story:** 評価者または管理者として、テンプレートの複製が永続的であることを望む。コピーされたテンプレートがページ更新後も利用可能であるようにするため。

#### Acceptance Criteria

1. テンプレートを複製するとき、システムはコピーされた内容で新しいテンプレートをバックエンドに作成すること
2. テンプレートを複製するとき、システムは複製されたテンプレートに新しい一意のIDを割り当てること
3. テンプレートを複製するとき、システムはコピーであることを示すように名前を変更すること（例：「元の名前 のコピー」）
4. 複製後にページを更新したとき、複製されたテンプレートはテンプレート一覧に表示され続けること
5. 複製が失敗したとき、システムはエラーメッセージを表示し、一時的なコピーを表示しないこと

### Requirement 4

**User Story:** 評価者または管理者として、テンプレートの可視性を公開と非公開の間で切り替えたい。誰が自分のテンプレートにアクセスして使用できるかを制御するため。

#### Acceptance Criteria

1. テンプレート一覧でテンプレートを表示するとき、システムは現在の可視性ステータス（公開/非公開）を表示すること
2. テンプレート管理オプションにアクセスするとき、システムは公開と非公開の可視性を切り替える方法を提供すること
3. テンプレートの可視性を変更するとき、システムはバックエンドを更新し、UIに変更を即座に反映すること
4. テンプレートを非公開にするとき、作成者と管理者のみがそれを見て使用できること
5. テンプレートを公開にするとき、すべての評価者がそれを見て使用できること
6. 可視性の変更が失敗したとき、システムはエラーメッセージを表示し、UIを前の状態に戻すこと

### Requirement 5

**User Story:** 評価者または管理者として、適切なエラーハンドリングとユーザーフィードバックを望む。操作が成功または失敗したときに何が起こっているかを理解するため。

#### Acceptance Criteria

1. テンプレート操作が進行中のとき、システムはローディングインジケーターを表示すること
2. 操作が成功したとき、システムは明確な説明付きの成功メッセージを表示すること
3. 操作が失敗したとき、システムは何が間違ったかを説明する具体的なエラーメッセージを表示すること
4. ネットワークエラーが発生したとき、システムは再試行オプションまたはフォールバック動作を提供すること
5. 一括操作を実行するとき、システムは進捗フィードバックと要約結果を提供すること