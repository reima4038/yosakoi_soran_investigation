# Requirements Document

## Introduction

セッション管理画面に招待リンク機能を追加し、参加者がセッションに簡単に参加できるようにする機能です。セッション作成者は招待リンクを生成し、外部のSNSやコミュニケーションツールを通じて参加者と共有できます。参加者は招待リンクをクリックするだけでセッションに参加できるようになります。

## Requirements

### Requirement 1

**User Story:** セッション作成者として、セッション管理画面で招待リンクを表示したい。そうすることで、参加者を簡単にセッションに招待できる。

#### Acceptance Criteria

1. WHEN セッション管理画面を開く THEN システム SHALL セッション固有の招待リンクを表示する
2. WHEN セッションが作成される THEN システム SHALL 自動的に招待リンクを生成する
3. IF セッションが非公開の場合 THEN システム SHALL セキュアな招待トークンを含むリンクを生成する

### Requirement 2

**User Story:** セッション作成者として、招待リンクをワンクリックでクリップボードにコピーしたい。そうすることで、外部ツールで簡単に共有できる。

#### Acceptance Criteria

1. WHEN 招待リンクの横にあるコピーボタンをクリックする THEN システム SHALL リンクをクリップボードにコピーする
2. WHEN コピーが成功する THEN システム SHALL 成功メッセージを表示する
3. IF コピーが失敗する THEN システム SHALL エラーメッセージを表示し、手動コピー用のテキスト選択状態にする

### Requirement 3

**User Story:** 参加者として、招待リンクをクリックしてセッションに参加したい。そうすることで、複雑な手順なしにセッションにアクセスできる。

#### Acceptance Criteria

1. WHEN 有効な招待リンクをクリックする THEN システム SHALL 自動的にセッションページにリダイレクトする
2. IF ユーザーがログインしていない場合 THEN システム SHALL ログインページにリダイレクトし、ログイン後にセッションページに戻る
3. IF 招待リンクが無効または期限切れの場合 THEN システム SHALL エラーページを表示する
4. WHEN 招待リンクが使用される THEN システム SHALL 参加者をセッションの参加者リストに追加する

### Requirement 4

**User Story:** セッション作成者として、招待リンクのセキュリティを管理したい。そうすることで、不正なアクセスを防げる。

#### Acceptance Criteria

1. WHEN セッションが削除される THEN システム SHALL 関連する招待リンクを無効化する
2. IF セッションの設定が変更される THEN システム SHALL 招待リンクの有効性を再評価する
3. WHEN セッションが終了する THEN システム SHALL 招待リンクを自動的に無効化する

### Requirement 5

**User Story:** システム管理者として、招待リンクの使用状況を追跡したい。そうすることで、システムの利用状況を把握できる。

#### Acceptance Criteria

1. WHEN 招待リンクが使用される THEN システム SHALL 使用ログを記録する
2. WHEN セッション管理画面を表示する THEN システム SHALL 招待リンクの使用回数を表示する
3. IF 異常なアクセスパターンが検出される THEN システム SHALL 警告を表示する